# æœ¬å…¬å¸82_æ•°ç”µæ™®ç¥¨ï¼ˆé€šè¡Œè´¹ï¼‰â†’é•¿è½¯72 å­—æ®µæ˜ å°„è¡¨

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-12-30
**å‘ç¥¨ç±»å‹**: 82 - ç”µå­å‘ç¥¨(æ™®é€šå‘ç¥¨) / æ•°å­—åŒ–ç”µå­å‘ç¥¨-æ™®é€šå‘ç¥¨ï¼ˆé€šè¡Œè´¹ä¸“ç”¨ï¼‰

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†æœ¬å…¬å¸å‘ç¥¨æŸ¥éªŒAPIä¸é•¿è½¯å‘ç¥¨æŸ¥éªŒæœåŠ¡ä¹‹é—´ï¼Œé’ˆå¯¹"æ•°ç”µæ™®ç¥¨ï¼ˆé€šè¡Œè´¹ï¼‰"çš„å®Œæ•´å­—æ®µæ˜ å°„å…³ç³»ã€‚

- **æœ¬å…¬å¸API**: [`/partners/invoice-verifications`](https://s.apifox.cn/2795ad32-31e7-4363-8294-578e8dc6202c/395314528e0) (RESTful JSONæ ¼å¼)
- **é•¿è½¯API**: ã€é•¿è½¯ã€‘å‘ç¥¨æŸ¥éªŒæœåŠ¡è°ƒç”¨è¯´æ˜V4.0.16.pdf (XMLæ ¼å¼)
- **æœ¬å…¬å¸å‘ç¥¨ç±»å‹ä»£ç **: 82
- **é•¿è½¯å‘ç¥¨ç±»å‹ä»£ç **: 72 (æ•°ç”µå‘ç¥¨-é€šè¡Œè´¹)
- **é•¿è½¯æ–‡æ¡£ç« èŠ‚**: 3.2.3.19

### ä¾èµ–çš„é€šç”¨æ–‡æ¡£

æœ¬æ˜ å°„è¡¨å¼•ç”¨ä»¥ä¸‹é€šç”¨æ–‡æ¡£ï¼Œä½¿ç”¨å‰è¯·å…ˆäº†è§£ï¼š
- ğŸ“„ [00_é€šç”¨è¯´æ˜_è¯·æ±‚å‚æ•°æ˜ å°„.md](./00_é€šç”¨è¯´æ˜_è¯·æ±‚å‚æ•°æ˜ å°„.md) - æŸ¥éªŒè¯·æ±‚å‚æ•°æ˜ å°„
- ğŸ“„ [00_é€šç”¨è¯´æ˜_æšä¸¾æ˜ å°„.md](./00_é€šç”¨è¯´æ˜_æšä¸¾æ˜ å°„.md) - é€šç”¨æšä¸¾å€¼æ˜ å°„(CYJGDM, ZFBZ, TSPZBZç­‰)

---

## ä¸€ã€ç±»å‹æ˜ å°„å…³ç³»

| é¡¹ç›® | æœ¬å…¬å¸API | é•¿è½¯API | è¯´æ˜ |
|------|-----------|---------|------|
| å‘ç¥¨ç±»å‹ä»£ç  | `82` | `72` | **å…³é”®**ï¼šé•¿è½¯72ä¸“é—¨ç”¨äºæ•°ç”µé€šè¡Œè´¹å‘ç¥¨ |
| å‘ç¥¨ç±»å‹åç§° | ç”µå­å‘ç¥¨(æ™®é€šå‘ç¥¨) | æ•°ç”µå‘ç¥¨(é€šè¡Œè´¹) | é€šè¡Œè´¹ä¸“ç”¨çš„æ•°ç”µæ™®ç¥¨ |
| æ•°æ®ç»“æ„å®šä¹‰ | `#/definitions/231697052` | `3.2.3.19` | |
| å‘ç¥¨ä»‹è´¨ | å…¨ç”µå­ | å…¨ç”µå­ | æ— çº¸è´¨å‘ç¥¨ä»£ç  |
| æ•°ç”µå‘ç¥¨ç±»å‹ | - | **ä¸ä½¿ç”¨QDLX** | ä¸é•¿è½¯09ä¸åŒï¼Œ72ä¸éœ€è¦QDLXå­—æ®µ |

### âš ï¸ é‡è¦ï¼šè§¦å‘æ¡ä»¶

**æœ¬æ˜ å°„è¡¨é€‚ç”¨äºä»¥ä¸‹æƒ…å†µ**ï¼š
1. å½“æœ¬å…¬å¸å‘ç¥¨ç±»å‹ä¸º82ï¼ˆæ•°ç”µæ™®ç¥¨ï¼‰
2. **ä¸”**æ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶ï¼š
   - ç‰¹æ®Šç¥¨ç§æ ‡å¿— `TSPZBZ = 14`ï¼ˆé€šè¡Œè´¹å‘ç¥¨ï¼‰
   - æ˜ç»†ä¸­åŒ…å«é€šè¡Œè´¹ç‰¹å¾ï¼ˆè½¦ç‰Œå·ã€é€šè¡Œæ—¥æœŸç­‰ï¼‰
   - é•¿è½¯æŸ¥éªŒç»“æœè¿”å› `FPLX = 72`

**æ˜ å°„è·¯ç”±é€»è¾‘**ï¼š
```
å¦‚æœ invoice_type = 82:
    å¦‚æœ TSPZBZ = 14 æˆ– é•¿è½¯è¿”å›FPLX=72:
        ä½¿ç”¨æœ¬æ˜ å°„è¡¨ï¼ˆ82â†’72ï¼‰
    å¦åˆ™:
        ä½¿ç”¨æ ‡å‡†æ•°ç”µæ™®ç¥¨æ˜ å°„è¡¨ï¼ˆ82â†’09(QDLX=10)ï¼‰
```

---

## äºŒã€å‘ç¥¨ä¸»ä¿¡æ¯å­—æ®µæ˜ å°„

### 2.1 å®Œæ•´å­—æ®µå¯¹ç…§è¡¨

âš ï¸ **é‡è¦**: æœ¬è¡¨æ ¼åŒ…å«è¯¥å‘ç¥¨ç±»å‹çš„**æ‰€æœ‰å“åº”å­—æ®µ**ï¼Œè¯·é€ä¸€æ ¸å¯¹ã€‚

| æœ¬å…¬å¸APIå­—æ®µè·¯å¾„ | æœ¬å…¬å¸APIä¸­æ–‡å | æœ¬å…¬å¸APIç±»å‹ | é•¿è½¯APIå­—æ®µè·¯å¾„ | é•¿è½¯APIä¸­æ–‡å | é•¿è½¯APIç±»å‹ | æ˜ å°„è¯´æ˜ |
|---|---|---|---|---|---|---|
| `invoice_number` | å‘ç¥¨å·ç  | string(20) | `BODY/FPHM` | å‘ç¥¨å·ç  | VARCHAR2(10) | ç›´æ¥æ˜ å°„ï¼Œæ•°ç”µç¥¨å·20ä½ï¼ˆæ³¨æ„é•¿è½¯ç±»å‹æ ‡æ³¨ä¸º10ä½†å®é™…æ”¯æŒ20ä½ï¼‰ |
| `invoice_code` | çº¸è´¨å‘ç¥¨ä»£ç  | string(12) | `BODY/FPDM` | å‘ç¥¨ä»£ç  | VARCHAR2(20) | **æ•°ç”µæ™®ç¥¨æ— å‘ç¥¨ä»£ç **ï¼ŒFPDMä¸ºç©º |
| `paper_invoice_no` | çº¸è´¨å‘ç¥¨å·ç  | string(20) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œæ•°ç”µç¥¨æ— æ­¤å­—æ®µ |
| - | - | - | `BODY/CYCS` | æŸ¥éªŒæ¬¡æ•° | VARCHAR2(32) | **é•¿è½¯ç‹¬æœ‰**ï¼Œè®°å½•æŸ¥éªŒæ¬¡æ•° |
| `issue_date` | å¼€ç¥¨æ—¥æœŸ | string(19) | `BODY/KPRQ` | å¼€ç¥¨æ—¥æœŸ | VARCHAR2(32) | æ ¼å¼è½¬æ¢ï¼šYYYY-MM-DD â† YYYYMMDD |
| `buyer_name` | è´­ä¹°æ–¹åç§° | string(150) | `BODY/GFMC` | è´­æ–¹åç§° | VARCHAR2(300) | ç›´æ¥æ˜ å°„ |
| `buyer_tax_no` | è´­ä¹°æ–¹è¯†åˆ«å· | string(20) | `BODY/GFSH` | è´­æ–¹çº³ç¨äººè¯†åˆ«å· | VARCHAR2(64) | ç›´æ¥æ˜ å°„ï¼Œ**æ³¨æ„å­—æ®µåä¸ºGFSHä¸æ˜¯GFSBH** |
| `buyer_address` | è´­ä¹°æ–¹åœ°å€ | string(300) | `BODY/GFDZDH` | è´­æ–¹åœ°å€ã€ç”µè¯ | VARCHAR2(120) | ç›´æ¥æ˜ å°„ |
| `buyer_phone` | è´­ä¹°æ–¹ç”µè¯ | string(60) | `BODY/GFDZDH` | è´­æ–¹åœ°å€ã€ç”µè¯ | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»GFDZDHè§£æ |
| `buyer_bank_name` | è´­ä¹°æ–¹å¼€æˆ·è¡Œ | string(120) | `BODY/GFYHZH` | è´­æ–¹å¼€æˆ·è¡ŒåŠè´¦å· | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»GFYHZHè§£æ |
| `buyer_account_number` | è´­ä¹°æ–¹è´¦å· | string(100) | `BODY/GFYHZH` | è´­æ–¹å¼€æˆ·è¡ŒåŠè´¦å· | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»GFYHZHè§£æ |
| `seller_name` | é”€å”®æ–¹åç§° | string(150) | `BODY/XFMC` | é”€æ–¹åç§° | VARCHAR2(300) | ç›´æ¥æ˜ å°„ |
| `seller_tax_no` | é”€å”®æ–¹è¯†åˆ«å· | string(20) | `BODY/XFSH` | é”€æ–¹çº³ç¨äººè¯†åˆ«å· | VARCHAR2(64) | ç›´æ¥æ˜ å°„ï¼Œ**æ³¨æ„å­—æ®µåä¸ºXFSHä¸æ˜¯XFSBH** |
| `seller_address` | é”€è´§æ–¹åœ°å€ | string(250) | `BODY/XFDZDH` | é”€æ–¹åœ°å€ç”µè¯ | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»XFDZDHè§£æ |
| `seller_phone` | é”€å”®æ–¹ç”µè¯ | string(60) | `BODY/XFDZDH` | é”€æ–¹åœ°å€ç”µè¯ | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»XFDZDHè§£æ |
| `seller_bank_name` | é”€å”®æ–¹å¼€æˆ·è¡Œ | string(120) | `BODY/XFYHZH` | é”€æ–¹å¼€æˆ·è¡ŒåŠè´¦å· | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»XFYHZHè§£æ |
| `seller_account_number` | é”€å”®æ–¹è´¦å· | string(100) | `BODY/XFYHZH` | é”€æ–¹å¼€æˆ·è¡ŒåŠè´¦å· | VARCHAR2(120) | **åˆå¹¶å­—æ®µ**ï¼šéœ€ä»XFYHZHè§£æ |
| - | - | - | `BODY/JE` | é‡‘é¢åˆè®¡ | VARCHAR2(32) | **é•¿è½¯ç‹¬æœ‰**ï¼Œæœ¬å…¬å¸ä»itemsè®¡ç®— |
| `tax_amount` | åˆè®¡ç¨é¢ | number(18,2) | `BODY/SE` | ç¨é¢åˆè®¡ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `amount_including_tax` | ä»·ç¨åˆè®¡ | number(18,2) | `BODY/JSHJ` | ä»·ç¨åˆè®¡ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `amount_in_words` | ä»·ç¨åˆè®¡(å¤§å†™) | string(300) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œéœ€è‡ªè¡Œè®¡ç®— |
| `remark` | å¤‡æ³¨ | string(450) | `BODY/BZ` | å¤‡æ³¨ | VARCHAR2(610) | ç›´æ¥æ˜ å°„ |
| - | - | - | `BODY/SBBH` | è®¾å¤‡ç¼–å· | VARCHAR2(16) | **é•¿è½¯ç‹¬æœ‰**ï¼Œæ•°ç”µç¥¨å¯èƒ½ä¸ºç©º |
| - | - | - | `BODY/JYM` | æ ¡éªŒç  | VARCHAR2(32) | **é•¿è½¯å­—æ®µä¸ºç©º**ï¼Œæ•°ç”µç¥¨æ— æ ¡éªŒç  |
| `invoice_status` | å‘ç¥¨çŠ¶æ€ | æšä¸¾ | `BODY/FPZT` | å‘ç¥¨çŠ¶æ€ | VARCHAR2(2) | **æ³¨æ„**ï¼šé•¿è½¯72ä½¿ç”¨FPZTè€Œä¸æ˜¯ZFBZï¼Œå‚è§é€šç”¨æšä¸¾æ–‡æ¡£ |
| - | - | - | `BODY/TXFBZ` | é€šè¡Œè´¹æ ‡å¿— | VARCHAR2(2) | **é•¿è½¯ç‹¬æœ‰**ï¼ŒY=æ˜¾ç¤ºé€šè¡Œè´¹æ ‡å¿—ï¼ŒN=ä¸æ˜¾ç¤º |
| - | - | - | `BODY/CYSJ` | æŸ¥éªŒæ—¶é—´ | VARCHAR2(20) | **é•¿è½¯ç‹¬æœ‰**ï¼ŒæŸ¥éªŒæ—¶é—´æˆ³ |
| - | - | - | `HEAD/CYJGDM` | æŸ¥éªŒç»“æœä»£ç  | VARCHAR(3) | **å…³é”®å­—æ®µ**ï¼ŒæŸ¥éªŒçŠ¶æ€ç ï¼Œå‚è§é€šç”¨æšä¸¾æ–‡æ¡£ |
| `issuer` | å¼€ç¥¨äºº | string(300) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œæ•°ç”µç¥¨æ— æ­¤å­—æ®µ |
| `reviewer` | å¤æ ¸äººå§“å | string(75) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œæ•°ç”µç¥¨æ— æ­¤å­—æ®µ |
| `payee` | æ”¶æ¬¾äººå§“å | string(150) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œæ•°ç”µç¥¨æ— æ­¤å­—æ®µ |
| `is_blue_invoice` | è“å­—/çº¢å­—æ ‡è¯† | æšä¸¾(Y/N) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œä»FPZTæ¨æ–­ |
| `original_blue_invoice_no` | å¯¹åº”è“å­—å‘ç¥¨å·ç  | string(20) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œçº¢ç¥¨æ—¶å¡«å†™ |
| `seller_taxpayer_type_code` | é”€æ–¹çº³ç¨äººç±»å‹ä»£ç  | string | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œé€šè¡Œè´¹å‘ç¥¨é€šå¸¸ä¸ºä¸€èˆ¬çº³ç¨äºº |
| `item_count` | æ˜ç»†æ¡æ•° | integer | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œitemsæ•°ç»„é•¿åº¦ |

**å­—æ®µåˆ†ç±»è¯´æ˜**ï¼š
- **ç›´æ¥æ˜ å°„**: å­—æ®µåå’Œå«ä¹‰ä¸€è‡´ï¼Œç›´æ¥å¯¹åº”
- **æ ¼å¼è½¬æ¢**: éœ€è¦è¿›è¡Œæ ¼å¼è½¬æ¢ï¼ˆå¦‚æ—¥æœŸã€é‡‘é¢æ ¼å¼ï¼‰
- **ç±»å‹è½¬æ¢**: éœ€è¦è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ï¼ˆå¦‚string â†” numberï¼‰
- **åˆå¹¶å­—æ®µ**: é•¿è½¯APIå°†å¤šä¸ªå­—æ®µåˆå¹¶åˆ°ä¸€ä¸ªå­—æ®µä¸­ï¼Œéœ€è¦è§£ææ‹†åˆ†
- **é•¿è½¯ç‹¬æœ‰**: é•¿è½¯APIç‹¬æœ‰å­—æ®µï¼Œæœ¬å…¬å¸APIæ— æ­¤å­—æ®µ
- **æœ¬å…¬å¸ç‹¬æœ‰**: æœ¬å…¬å¸APIç‹¬æœ‰å­—æ®µï¼Œéœ€ä»å…¶ä»–æ•°æ®æºè·å–æˆ–è®¡ç®—

### 2.2 æœ¬å…¬å¸ç‹¬æœ‰å­—æ®µå¤„ç†è¯´æ˜

| æœ¬å…¬å¸å­—æ®µ | æ•°æ®æ¥æº | å¤„ç†é€»è¾‘ |
|-----------|---------|----------|
| `amount_in_words` | è®¡ç®—å¾—å‡º | å°†amount_including_taxæ•°å­—è½¬æ¢ä¸ºä¸­æ–‡å¤§å†™ |
| `item_count` | è®¡ç®—å¾—å‡º | itemsæ•°ç»„é•¿åº¦ï¼Œå³æ˜ç»†æ¡æ•° |
| `is_blue_invoice` | æ¨æ–­å¾—å‡º | æ ¹æ®FPZTåˆ¤æ–­ï¼š0/1â†’Y(è“å­—)ï¼Œ2/3/7/8â†’N(çº¢å­—) |
| `original_blue_invoice_no` | ä¸šåŠ¡ç³»ç»Ÿ | çº¢å­—å‘ç¥¨å¯¹åº”çš„åŸè“å­—å‘ç¥¨å·ï¼Œä»ä¸šåŠ¡ç³»ç»Ÿè·å– |
| `seller_taxpayer_type_code` | ä¸šåŠ¡è§„åˆ™ | é€šè¡Œè´¹å‘ç¥¨é”€å”®æ–¹é€šå¸¸ä¸ºä¸€èˆ¬çº³ç¨äºº(1) |
| `issuer` | - | æ•°ç”µç¥¨æ— å¼€ç¥¨äººå­—æ®µï¼Œè¿”å›null |
| `reviewer` | - | æ•°ç”µç¥¨æ— å¤æ ¸äººå­—æ®µï¼Œè¿”å›null |
| `payee` | - | æ•°ç”µç¥¨æ— æ”¶æ¬¾äººå­—æ®µï¼Œè¿”å›null |
| `paper_invoice_no` | - | æ•°ç”µç¥¨æ— çº¸è´¨å·ç ï¼Œè¿”å›null |

---

## ä¸‰ã€è´§ç‰©/æ˜ç»†å­—æ®µæ˜ å°„

### 3.1 æ˜ç»†ç»“æ„è¯´æ˜

âš ï¸ **å…³é”®æ¶æ„å†³ç­–**ï¼šæ•°ç”µé€šè¡Œè´¹å‘ç¥¨ï¼ˆ72ï¼‰çš„æ˜ç»†æ•°æ®éœ€è¦**æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ•°ç»„**ï¼š

**æœ¬å…¬å¸APIç»“æ„**ï¼š
```json
{
  "items": [],                    // æ ‡å‡†è´§ç‰©æ˜ç»†ï¼ˆä¿æŒ82æ•°ç”µæ™®ç¥¨çš„è¯­ä¹‰ï¼‰
  "toll_fee_detail_list": []      // é€šè¡Œè´¹ç‰¹å®šä¸šåŠ¡è¦ç´ ï¼ˆæ–°å¢å­—æ®µï¼‰
}
```

**é•¿è½¯APIè·¯å¾„**: `BODY/CHILDLIST/CHILD[]`ï¼ˆå•ä¸€æ•°ç»„ï¼‰

âš ï¸ **ä¸ºä»€ä¹ˆå¿…é¡»æ‹†åˆ†ï¼Ÿ**
1. **è¯­ä¹‰æ­£ç¡®æ€§**ï¼š`items[]`çš„å­—æ®µï¼ˆå¦‚`specification`=è§„æ ¼å‹å·ï¼‰ä¸èƒ½è¢«é‡ç”¨ä¸ºè½¦ç‰Œå·ï¼Œä¼šå¯¼è‡´å­—æ®µè¯­ä¹‰æ··ä¹±
2. **æ•°æ®ä¸€è‡´æ€§**ï¼šä¿æŒ82ç±»å‹å‘ç¥¨çš„`items[]`ç»“æ„ç»Ÿä¸€ï¼Œæ— è®ºæ˜¯æ™®é€šæ•°ç”µæ™®ç¥¨è¿˜æ˜¯é€šè¡Œè´¹æ•°ç”µæ™®ç¥¨
3. **ä¸šåŠ¡æ‰©å±•æ€§**ï¼šé€šè¡Œè´¹ç‰¹å®šä¿¡æ¯ï¼ˆè½¦ç‰Œå·ã€é€šè¡Œæ—¥æœŸï¼‰åº”è¯¥æ”¾åœ¨ä¸“é—¨çš„ä¸šåŠ¡å­—æ®µä¸­

**æ‹†åˆ†é€»è¾‘**ï¼š
- é•¿è½¯72çš„æ¯ä¸ª`CHILD`å…ƒç´ åŒæ—¶æ˜ å°„åˆ°ä¸¤ä¸ªæ•°ç»„
- `items[]`ï¼šä¿ç•™æ ‡å‡†è´§ç‰©å­—æ®µï¼ˆé‡‘é¢ã€ç¨ç‡ã€ç¨é¢ï¼‰ï¼Œå…¶ä»–å­—æ®µï¼ˆè§„æ ¼å‹å·ã€å•ä½ç­‰ï¼‰ç•™ç©º
- `toll_fee_detail_list[]`ï¼šåŒ…å«é€šè¡Œè´¹ç‰¹å®šä¿¡æ¯ï¼ˆè½¦ç‰Œå·ã€é€šè¡Œç±»å‹ã€é€šè¡Œæ—¥æœŸï¼‰

### 3.2 æ ‡å‡†è´§ç‰©æ˜ç»†æ˜ å°„ï¼ˆitems[]ï¼‰

**æœ¬å…¬å¸APIè·¯å¾„**: `items[]`

| æœ¬å…¬å¸APIå­—æ®µ | æœ¬å…¬å¸APIä¸­æ–‡å | æœ¬å…¬å¸APIç±»å‹ | é•¿è½¯APIå­—æ®µ | é•¿è½¯APIä¸­æ–‡å | é•¿è½¯APIç±»å‹ | æ˜ å°„è¯´æ˜ |
|---|---|---|---|---|---|---|
| `sequence_no` | åºå· | integer | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œç”¨äºæ’åºï¼Œä¸toll_fee_detail_listä¿æŒä¸€è‡´ |
| `name` / `goods_or_service_name` | è´§ç‰©æˆ–åº”ç¨åŠ³åŠ¡åç§° | string(300/600) | `HWMC` | è´§ç‰©æˆ–åº”ç¨åŠ³åŠ¡ã€æœåŠ¡åç§° | VARCHAR2(310) | ç›´æ¥æ˜ å°„ï¼Œé€šå¸¸ä¸º"é€šè¡Œè´¹" |
| `specification` | è§„æ ¼å‹å· | string(150) | - | - | - | **ç•™ç©º**ï¼Œé€šè¡Œè´¹æ— è§„æ ¼å‹å· |
| `unit` | å•ä½ | string(300) | - | - | - | **ç•™ç©º**ï¼Œé€šè¡Œè´¹æ— è®¡é‡å•ä½ |
| `quantity` | å‘ç¥¨äº¤æ˜“æ•°é‡ | string(25) | - | - | - | **ç•™ç©º**ï¼Œé€šè¡Œè´¹æ— æ•°é‡æ¦‚å¿µ |
| `unit_price` | å‘ç¥¨äº¤æ˜“å•ä»· | string(25) | - | - | - | **ç•™ç©º**ï¼Œé€šè¡Œè´¹æ— å•ä»·æ¦‚å¿µ |
| `amount` | é‡‘é¢ | number(8,2) | `JE` | é‡‘é¢ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `tax_rate` | ç¨ç‡ | number(6,6) | `SLV` | ç¨ç‡ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `tax_amount` | ç¨é¢ | number(8,6) | `SE` | ç¨é¢ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `tax_classification_code` | å•†å“ç¨æ”¶åˆ†ç±»ç¼–ç  | string(19) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œä»ä¸šåŠ¡ç³»ç»Ÿè·å– |
| `deduction_amount` | æ‰£é™¤é¢ | number(8,2) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œå·®é¢å¾ç¨ |
| `item_short_name` | å•†å“æœåŠ¡ç®€ç§° | string(120) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰** |
| `product_barcode` | å•†å“æ¡ç  | string(300) | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰** |

**è¯´æ˜**ï¼š
- `items[]`ä¿æŒæ ‡å‡†82æ•°ç”µæ™®ç¥¨çš„ç»“æ„ï¼Œåªå¡«å……é‡‘é¢ç›¸å…³å­—æ®µ
- è§„æ ¼å‹å·ã€å•ä½ã€æ•°é‡ã€å•ä»·ç­‰å­—æ®µç•™ç©ºï¼ˆnullæˆ–ç©ºå­—ç¬¦ä¸²ï¼‰
- é€šè¡Œè´¹ç‰¹å®šä¿¡æ¯ä¸æ··å…¥æ­¤æ•°ç»„

### 3.3 é€šè¡Œè´¹ç‰¹å®šä¸šåŠ¡è¦ç´ æ˜ å°„ï¼ˆtoll_fee_detail_list[]ï¼‰

**æœ¬å…¬å¸APIè·¯å¾„**: `toll_fee_detail_list[]`ï¼ˆ**æ–°å¢å­—æ®µ**ï¼‰

| æœ¬å…¬å¸APIå­—æ®µ | æœ¬å…¬å¸APIä¸­æ–‡å | æœ¬å…¬å¸APIç±»å‹ | é•¿è½¯APIå­—æ®µ | é•¿è½¯APIä¸­æ–‡å | é•¿è½¯APIç±»å‹ | æ˜ å°„è¯´æ˜ |
|---|---|---|---|---|---|---|
| `sequence_no` | åºå· | integer | - | - | - | **æœ¬å…¬å¸ç‹¬æœ‰**ï¼Œä¸itemsä¿æŒä¸€è‡´ |
| `vehicle_plate` | è½¦ç‰Œå· | string(64) | `CPH` | è½¦ç‰Œå· | VARCHAR2(64) | ç›´æ¥æ˜ å°„ |
| `toll_type` | é€šè¡Œç±»å‹ | string(52) | `LX` | ç±»å‹ | VARCHAR2(52) | ç›´æ¥æ˜ å°„ï¼ˆå¦‚"é«˜é€Ÿå…¬è·¯"ã€"æ¡¥æ¢"ï¼‰ |
| `start_date` | é€šè¡Œæ—¥æœŸèµ· | string(32) | `TXRQQ` | é€šè¡Œæ—¥æœŸèµ· | VARCHAR2(32) | æ—¥æœŸæ ¼å¼è½¬æ¢ï¼šYYYY-MM-DD |
| `end_date` | é€šè¡Œæ—¥æœŸæ­¢ | string(32) | `TXRQZ` | é€šè¡Œæ—¥æœŸæ­¢ | VARCHAR2(32) | æ—¥æœŸæ ¼å¼è½¬æ¢ï¼šYYYY-MM-DD |
| `amount` | é‡‘é¢ | number(18,2) | `JE` | é‡‘é¢ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `tax_rate` | ç¨ç‡ | number(8,5) | `SLV` | ç¨ç‡ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `tax_amount` | ç¨é¢ | number(18,2) | `SE` | ç¨é¢ | VARCHAR2(32) | ç±»å‹è½¬æ¢ï¼šé•¿è½¯ä¸ºå­—ç¬¦ä¸² |
| `special_policy_code` | ç‰¹æ®Šæ”¿ç­–æ ‡è¯† | string(2) | `TSZCBS` | ç‰¹æ®Šæ”¿ç­–æ ‡è¯† | VARCHAR2(2) | ç›´æ¥æ˜ å°„ï¼ˆ1=å…ç¨,2=ä¸å¾ç¨,3=0ç¨ç‡ï¼‰ |
| `actual_tax_rate` | å®é™…ç¨ç‡ | string(32) | `SJSL` | å®é™…ç¨ç‡ | VARCHAR2(32) | é•¿è½¯ç‹¬æœ‰ï¼Œå¯èƒ½ä¸æ ‡å‡†ç¨ç‡ä¸åŒ |

**è¯´æ˜**ï¼š
- è¿™æ˜¯æœ¬å…¬å¸APIçš„æ‰©å±•å­—æ®µï¼Œä¸“é—¨ç”¨äºå­˜å‚¨é€šè¡Œè´¹ä¸šåŠ¡ä¿¡æ¯
- ä¸`items[]`ä¸€ä¸€å¯¹åº”ï¼ˆé€šè¿‡`sequence_no`å…³è”ï¼‰
- åŒ…å«é€šè¡Œè´¹ç‰¹æœ‰çš„å­—æ®µï¼šè½¦ç‰Œå·ã€é€šè¡Œç±»å‹ã€é€šè¡Œæ—¥æœŸ

---

## å››ã€æ•°æ®æ ¼å¼è½¬æ¢è¯´æ˜

### 4.1 æ—¥æœŸæ ¼å¼è½¬æ¢

| API | æ ¼å¼ | ç¤ºä¾‹ |
|-----|------|------|
| æœ¬å…¬å¸API | `YYYY-MM-DD` æˆ– `YYYY-MM-DD HH:mm:ss` | 2025-12-30 æˆ– 2025-12-30 16:59:45 |
| é•¿è½¯API | `YYYYMMDD` | 20251230 |

**è½¬æ¢è§„åˆ™**ï¼š
- å¼€ç¥¨æ—¥æœŸ (KPRQ): `YYYYMMDD` â†’ `YYYY-MM-DD`
- é€šè¡Œæ—¥æœŸèµ·/æ­¢ (TXRQQ/TXRQZ): é•¿è½¯æ ¼å¼å¯èƒ½ä¸º `YYYYMMDD` æˆ– `YYYY-MM-DD`ï¼Œéœ€è¦ç»Ÿä¸€è½¬æ¢
- å®ç°: `${yyyymmdd.substr(0,4)}-${yyyymmdd.substr(4,2)}-${yyyymmdd.substr(6,2)}`

### 4.2 æ•°å€¼ç±»å‹è½¬æ¢

| æ•°æ®é¡¹ | æœ¬å…¬å¸API | é•¿è½¯API | è½¬æ¢è¯´æ˜ |
|--------|-----------|---------|----------|
| é‡‘é¢åˆè®¡ | æœ¬å…¬å¸ä»itemsè®¡ç®— | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯JEå­—æ®µå­˜åœ¨ä½†æœ¬å…¬å¸ä¸ä½¿ç”¨ |
| ç¨é¢åˆè®¡ | `number` (18,2) | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯â†’æœ¬å…¬å¸: `parseFloat()` |
| ä»·ç¨åˆè®¡ | `number` (18,2) | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯â†’æœ¬å…¬å¸: `parseFloat()` |
| æ˜ç»†é‡‘é¢ | `number` (8,2) | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯â†’æœ¬å…¬å¸: `parseFloat()` |
| æ˜ç»†ç¨é¢ | `number` (8,6) | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯â†’æœ¬å…¬å¸: `parseFloat()` |
| æ˜ç»†ç¨ç‡ | `number` (6,6) | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯â†’æœ¬å…¬å¸: `parseFloat()` |
| å®é™…ç¨ç‡ | - | `VARCHAR2(32)` å­—ç¬¦ä¸² | é•¿è½¯ç‹¬æœ‰å­—æ®µ |

**è½¬æ¢ç¤ºä¾‹**ï¼š
```javascript
// é•¿è½¯APIè¿”å›
{
  "JE": "1000.00",       // é‡‘é¢åˆè®¡(å­—ç¬¦ä¸²)
  "SE": "30.00",         // ç¨é¢åˆè®¡(å­—ç¬¦ä¸²ï¼Œé€šè¡Œè´¹ç¨ç‡3%)
  "JSHJ": "1030.00"      // ä»·ç¨åˆè®¡(å­—ç¬¦ä¸²)
}

// è½¬æ¢ä¸ºæœ¬å…¬å¸API
{
  "tax_amount": 30.00,
  "amount_including_tax": 1030.00,
  "amount_in_words": "å£¹ä»Ÿé›¶åæ‹¾å…ƒæ•´"
}
```

### 4.3 å­—ç¬¦ä¸²é•¿åº¦é€‚é…

| å­—æ®µ | æœ¬å…¬å¸é•¿åº¦ | é•¿è½¯é•¿åº¦ | å¤„ç†ç­–ç•¥ |
|------|-----------|---------|----------|
| invoice_number | 20 | 10(å®é™…20) | âœ… é•¿åº¦ä¸€è‡´ï¼Œæ•°ç”µç¥¨å·20ä½ |
| seller_tax_no | 20 | 64 | âš ï¸ é•¿è½¯æ›´å®½æ¾ï¼Œä½†å®é™…18ä½å¤Ÿç”¨ |
| buyer_tax_no | 20 | 64 | âš ï¸ é•¿è½¯æ›´å®½æ¾ï¼Œä½†å®é™…18ä½å¤Ÿç”¨ |
| buyer_name | 150 | 300 | âš ï¸ é•¿è½¯æ›´å¤§ï¼Œéœ€æ³¨æ„æˆªæ–­ |
| seller_name | 150 | 300 | âš ï¸ é•¿è½¯æ›´å¤§ï¼Œéœ€æ³¨æ„æˆªæ–­ |

### 4.4 åˆå¹¶å­—æ®µè§£æ

é•¿è½¯72ä¸­çš„åœ°å€ç”µè¯ã€å¼€æˆ·è¡Œè´¦å·å­—æ®µæ˜¯åˆå¹¶çš„ï¼Œéœ€è¦è§£æï¼š

**è§£æè§„åˆ™**ï¼š
```javascript
// XFDZDH (é”€æ–¹åœ°å€ç”µè¯): "åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å· 010-12345678"
// è§£æä¸ºï¼š
// seller_address: "åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1å·"
// seller_phone: "010-12345678"

// XFYHZH (é”€æ–¹å¼€æˆ·è¡ŒåŠè´¦å·): "ä¸­å›½å·¥å•†é“¶è¡ŒåŒ—äº¬åˆ†è¡Œ 1234567890"
// è§£æä¸ºï¼š
// seller_bank_name: "ä¸­å›½å·¥å•†é“¶è¡ŒåŒ—äº¬åˆ†è¡Œ"
// seller_account_number: "1234567890"
```

**å®ç°é€»è¾‘**ï¼š
- ä½¿ç”¨æ­£åˆ™æˆ–å­—ç¬¦ä¸²åˆ†å‰²ï¼ˆé€šå¸¸ä»¥ç©ºæ ¼åˆ†éš”ï¼‰
- åœ°å€åœ¨å‰ï¼Œç”µè¯åœ¨åï¼ˆé€šå¸¸ç”µè¯æ ¼å¼ä¸ºxxx-xxxæˆ–çº¯æ•°å­—ï¼‰
- å¼€æˆ·è¡Œåœ¨å‰ï¼Œè´¦å·åœ¨åï¼ˆè´¦å·é€šå¸¸ä¸ºçº¯æ•°å­—ï¼‰

---

## äº”ã€æšä¸¾å€¼æ˜ å°„

### 5.1 é€šç”¨æšä¸¾æ˜ å°„

é€šç”¨æšä¸¾å€¼è¯¦è§: ğŸ“„ [00_é€šç”¨è¯´æ˜_æšä¸¾æ˜ å°„.md](./00_é€šç”¨è¯´æ˜_æšä¸¾æ˜ å°„.md)

åŒ…æ‹¬ï¼š
- **æŸ¥éªŒç»“æœä»£ç ** (CYJGDM â†’ HTTPçŠ¶æ€ç  + error.code)
- **å‘ç¥¨çŠ¶æ€** (FPZT â†’ invoice_status)  - **æ³¨æ„**ï¼šé•¿è½¯72ä½¿ç”¨FPZTè€Œä¸æ˜¯ZFBZ
- **ç‰¹æ®Šæ”¿ç­–æ ‡è¯†** (TSZCBS)

### 5.2 æ•°ç”µé€šè¡Œè´¹å‘ç¥¨ç‰¹æœ‰æšä¸¾æ˜ å°„

âš ï¸ **é‡è¦**: ä»¥ä¸‹æšä¸¾ä¸º**è¯¥å‘ç¥¨ç±»å‹ç‰¹æœ‰**ï¼Œä¸åœ¨é€šç”¨æšä¸¾æ–‡æ¡£ä¸­ã€‚

#### 5.2.1 é€šè¡Œè´¹æ ‡å¿— (TXFBZ)

| é•¿è½¯å€¼ | å«ä¹‰ | è¯´æ˜ |
|-------|------|------|
| Y | æ˜¾ç¤ºé€šè¡Œè´¹æ ‡å¿— | è¯¥å‘ç¥¨å±äºé€šè¡Œè´¹å‘ç¥¨ |
| N | ä¸æ˜¾ç¤ºé€šè¡Œè´¹æ ‡å¿— | è¯¥å‘ç¥¨ä¸å±äºé€šè¡Œè´¹å‘ç¥¨ï¼ˆä¸åº”å‡ºç°åœ¨72ç±»å‹ä¸­ï¼‰ |

**è¯´æ˜**ï¼š
- æœ¬å…¬å¸APIæš‚æ— å¯¹åº”å­—æ®µï¼Œå¯æ‰©å±•æ—¶æ·»åŠ  `toll_flag` å­—æ®µ
- é•¿è½¯72ç±»å‹ä¸­ï¼ŒTXFBZåº”å§‹ç»ˆä¸º"Y"

#### 5.2.2 å‘ç¥¨çŠ¶æ€ (FPZT)

**æ³¨æ„**ï¼šé•¿è½¯72ä½¿ç”¨FPZTè€Œä¸æ˜¯ZFBZ

| FPZTå€¼ | å«ä¹‰ | æœ¬å…¬å¸invoice_statusæ˜ å°„ |
|-------|------|----------------------|
| 0 | æ­£å¸¸ | NORMAL (æ­£å¸¸) |
| 1 | æ­£å¸¸ | NORMAL (æ­£å¸¸) |
| 2 | ä½œåºŸ | INVALIDATED (å·²ä½œåºŸ) |
| 3 | çº¢å†² | RED_FLUSHED (å·²çº¢å†²) |
| 7 | éƒ¨åˆ†çº¢å†² | PARTIALLY_RED_FLUSHED (éƒ¨åˆ†çº¢å†²) |
| 8 | å…¨é¢çº¢å†² | FULLY_RED_FLUSHED (å…¨é¢çº¢å†²) |

**æ•°ç”µç¥¨çš„ç‰¹æ®Šæ€§**ï¼š
- æ•°ç”µç¥¨å¾ˆå°‘ä½¿ç”¨"ä½œåºŸ"(FPZT=2)ï¼Œé€šå¸¸ä½¿ç”¨"çº¢å†²"(FPZT=3)
- çº¢å­—æ•°ç”µç¥¨ä¼šåœ¨ `original_blue_invoice_no` ä¸­è®°å½•è¢«çº¢å†²çš„è“å­—å‘ç¥¨å·

#### 5.2.3 ç‰¹æ®Šæ”¿ç­–æ ‡è¯† (TSZCBS)

**æ˜ç»†çº§æšä¸¾**ï¼š

| é•¿è½¯å€¼ | å«ä¹‰ | è¯´æ˜ |
|-------|------|------|
| 1 | å…ç¨ | é€šè¡Œè´¹å…ç¨æ”¿ç­– |
| 2 | ä¸å¾ç¨ | é€šè¡Œè´¹ä¸å¾ç¨ |
| 3 | 0ç¨ç‡ | é€šè¡Œè´¹é›¶ç¨ç‡ |
| 01 | ä¸å¾ç¨ | é€šè¡Œè´¹ä¸å¾ç¨ï¼ˆæ–°ç¼–ç ï¼‰ |

**è¯´æ˜**ï¼š
- TSZCBS æ˜¯æ˜ç»†çº§å­—æ®µï¼Œæ¯ä¸ªæ˜ç»†éƒ½å¯èƒ½æœ‰ä¸åŒçš„æ ‡è¯†
- é€šè¡Œè´¹å‘ç¥¨é€šå¸¸ä½¿ç”¨æ­£å¸¸ç¨ç‡ï¼ˆ3%ã€5%ç­‰ï¼‰

---

## å…­ã€æ•°ç”µé€šè¡Œè´¹å‘ç¥¨ç‰¹æ®Šæ€§è¯´æ˜

### 6.1 è¯¥ç±»å‹çš„ç‹¬ç‰¹ç‰¹æ€§

1. **æ•°ç”µåŒ–çš„é€šè¡Œè´¹å‘ç¥¨**
   - è¿™æ˜¯ä¼ ç»Ÿé€šè¡Œè´¹å‘ç¥¨ï¼ˆ14ï¼‰çš„æ•°ç”µåŒ–ç‰ˆæœ¬
   - æ— å‘ç¥¨ä»£ç ï¼Œä»…æœ‰20ä½å‘ç¥¨å·ç 
   - æ— æ ¡éªŒç ï¼Œé˜²ä¼ªé€šè¿‡æ•°å­—ç­¾åå®ç°
   - é€šè¿‡ç”µå­ç¨åŠ¡å±€å¼€å…·

2. **ä¸ä¼ ç»Ÿé€šè¡Œè´¹å‘ç¥¨(14)çš„åŒºåˆ«**
   - **å‘ç¥¨ä»£ç **: 14æœ‰ä»£ç ï¼Œ72æ— ä»£ç 
   - **å‘ç¥¨å·ç **: 14ä¸º8ä½ï¼Œ72ä¸º20ä½
   - **æ ¡éªŒç **: 14æœ‰æ ¡éªŒç ï¼Œ72æ— æ ¡éªŒç 
   - **é•¿è½¯ç±»å‹ç **: 14ç”¨FPLX=14ï¼Œ72ç”¨FPLX=72
   - **çŠ¶æ€å­—æ®µ**: 14ç”¨ZFBZï¼Œ72ç”¨FPZT

3. **ä¸æ™®é€šæ•°ç”µæ™®ç¥¨(82â†’09)çš„åŒºåˆ«**
   - **é•¿è½¯ç±»å‹**: 09(QDLX=10)ç”¨äºæ™®é€šæ•°ç”µæ™®ç¥¨ï¼Œ72ä¸“ç”¨äºé€šè¡Œè´¹
   - **æ˜ç»†å­—æ®µ**: 09ä¸ºå¸¸è§„è´§ç‰©æ˜ç»†ï¼Œ72ä¸ºé€šè¡Œè´¹ç‰¹æ®Šæ˜ç»†
   - **é€šè¡Œè´¹æ ‡å¿—**: 72æœ‰TXFBZå­—æ®µï¼Œ09æ— æ­¤å­—æ®µ
   - **çŠ¶æ€å­—æ®µ**: 72ç”¨FPZTï¼Œ09ç”¨ZFBZ

4. **æ˜ç»†æ•°æ®æ‹†åˆ†æ¶æ„**
   - é•¿è½¯72çš„æ˜ç»†æ•°æ®éœ€è¦**æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ•°ç»„**
   - `items[]`ï¼šä¿æŒæ ‡å‡†è´§ç‰©æ˜ç»†ç»“æ„ï¼ˆè§„æ ¼å‹å·ã€å•ä½ç­‰ç•™ç©ºï¼‰
   - `toll_fee_detail_list[]`ï¼šå­˜å‚¨é€šè¡Œè´¹ç‰¹å®šä¸šåŠ¡è¦ç´ ï¼ˆè½¦ç‰Œå·ã€é€šè¡Œæ—¥æœŸç­‰ï¼‰
   - âŒ **ç¦æ­¢å­—æ®µé‡ç”¨**ï¼šä¸èƒ½å°†`specification`é‡ç”¨ä¸ºè½¦ç‰Œå·ï¼Œä¼šå¯¼è‡´è¯­ä¹‰æ··ä¹±

5. **æŠµæ‰£æ”¿ç­–**
   - æ•°ç”µé€šè¡Œè´¹å‘ç¥¨å¯ä»¥æŠµæ‰£è¿›é¡¹ç¨é¢ï¼ˆç¬¦åˆæ¡ä»¶çš„ï¼‰
   - è¿™æ˜¯ä¸ä¼ ç»Ÿçº¸è´¨é€šè¡Œè´¹å‘ç¥¨çš„é‡è¦åŒºåˆ«
   - ç”µå­é€šè¡Œè´¹å‘ç¥¨ï¼ˆå·¦ä¸Šè§’æœ‰"é€šè¡Œè´¹"å­—æ ·ï¼‰å¯æŠµæ‰£

6. **å››æ–¹ä¿¡æ¯ç®€åŒ–**
   - é•¿è½¯è¿”å›çš„åœ°å€ç”µè¯ã€å¼€æˆ·è¡Œè´¦å·ä¸ºåˆå¹¶å­—æ®µ
   - éœ€è¦è§£ææ‹†åˆ†æ‰èƒ½æ˜ å°„åˆ°æœ¬å…¬å¸APIçš„ç‹¬ç«‹å­—æ®µ
   - åˆå¹¶æ ¼å¼ï¼šåœ°å€ + ç©ºæ ¼ + ç”µè¯

7. **é€šè¡Œè´¹ç‰¹æœ‰å­—æ®µ**
   - `TXFBZ`ï¼ˆé€šè¡Œè´¹æ ‡å¿—ï¼‰ï¼šæ ‡è¯†æ˜¯å¦ä¸ºé€šè¡Œè´¹å‘ç¥¨
   - `CPH`ï¼ˆè½¦ç‰Œå·ï¼‰ï¼šè®°å½•è½¦è¾†ç‰Œç…§
   - `LX`ï¼ˆé€šè¡Œç±»å‹ï¼‰ï¼šé«˜é€Ÿå…¬è·¯ã€æ¡¥æ¢ã€éš§é“ç­‰
   - `TXRQQ/TXRQZ`ï¼ˆé€šè¡Œæ—¥æœŸï¼‰ï¼šè®°å½•é€šè¡Œæ—¶é—´æ®µ

8. **å®é™…ç¨ç‡**
   - é•¿è½¯æ˜ç»†ä¸­æœ‰ `SJSL`ï¼ˆå®é™…ç¨ç‡ï¼‰
   - å¯èƒ½ä¸æ ‡å‡†ç¨ç‡ä¸åŒï¼ˆä¼˜æƒ æ”¿ç­–ç­‰ï¼‰
   - æœ¬å…¬å¸APIæš‚æ— å¯¹åº”å­—æ®µ

### 6.2 ä¸å…¶ä»–ç±»å‹çš„å¯¹æ¯”

| ç‰¹æ€§ | æ•°ç”µé€šè¡Œè´¹(82â†’72) | ä¼ ç»Ÿé€šè¡Œè´¹(14) | æ•°ç”µæ™®ç¥¨(82â†’09) |
|------|----------------|-------------|--------------|
| å‘ç¥¨ä»£ç  | âŒ æ—  | âœ… 12ä½ | âŒ æ—  |
| å‘ç¥¨å·ç  | âœ… 20ä½ | âœ… 8ä½ | âœ… 20ä½ |
| æ ¡éªŒç  | âŒ æ—  | âœ… æœ‰ | âŒ æ—  |
| é•¿è½¯ç±»å‹ç  | 72 | 14 | 09(QDLX=10) |
| çŠ¶æ€å­—æ®µ | FPZT | ZFBZ | ZFBZ |
| é€šè¡Œè´¹æ ‡å¿— | âœ… TXFBZ | âœ… TXFBZ | âŒ æ—  |
| æ˜ç»†ç±»å‹ | é€šè¡Œè´¹ç‰¹æ®Šæ˜ç»† | é€šè¡Œè´¹ç‰¹æ®Šæ˜ç»† | å¸¸è§„è´§ç‰©æ˜ç»† |
| æŠµæ‰£ | âœ… å¯æŠµæ‰£ | âš ï¸ éƒ¨åˆ†å¯æŠµæ‰£ | âŒ ä¸å¯æŠµæ‰£ |
| å‘ç¥¨ä»‹è´¨ | ç”µå­ | çº¸è´¨/ç”µå­ | ç”µå­ |
| ç¨æ§è®¾å¤‡ | âŒ æ—  | âœ… æœ‰ | âŒ æ—  |

### 6.3 ç‰¹æ®Šå¤„ç†é€»è¾‘

#### 6.3.1 å‘ç¥¨ç±»å‹è¯†åˆ«ä¸è·¯ç”±

**è§¦å‘æ¡ä»¶åˆ¤æ–­**ï¼š
```javascript
function determineInvoiceMapping(invoice) {
  // å¦‚æœæ˜¯82ç±»å‹çš„æ•°ç”µæ™®ç¥¨
  if (invoice.invoice_type === "82") {
    // æ£€æŸ¥æ˜¯å¦ä¸ºé€šè¡Œè´¹ç±»å‹
    if (invoice.special_invoice_type_flag === "14" ||
        hasServiceCharacter(invoice.items)) {
      // ä½¿ç”¨æ•°ç”µé€šè¡Œè´¹æ˜ å°„ï¼ˆ82â†’72ï¼‰
      return "82_TO_72_TOLL";
    } else {
      // ä½¿ç”¨æ™®é€šæ•°ç”µæ™®ç¥¨æ˜ å°„ï¼ˆ82â†’09ï¼‰
      return "82_TO_09_NORMAL";
    }
  }
}

function hasServiceCharacter(items) {
  // æ£€æŸ¥æ˜ç»†ä¸­æ˜¯å¦åŒ…å«é€šè¡Œè´¹ç‰¹å¾
  return items.some(item =>
    item.specification?.match(/^[äº¬æ´¥æ²ªæ¸å†€è±«äº‘è¾½é»‘æ¹˜çš–é²æ–°è‹æµ™èµ£é„‚æ¡‚ç”˜æ™‹è’™é™•å‰é—½è´µç²¤é’è—å·å®ç¼ä½¿é¢†][A-Z][A-HJ-NP-Z0-9]{4,5}[A-HJ-NP-Z0-9æŒ‚å­¦è­¦æ¸¯æ¾³]$/) // è½¦ç‰Œå·æ ¼å¼
  );
}
```

**ä¸šåŠ¡èƒŒæ™¯**ï¼š
- æ•°ç”µå‘ç¥¨ç³»ç»Ÿä¸­ï¼Œé€šè¡Œè´¹ç±»å‹çš„æ•°ç”µæ™®ç¥¨ä¼šè¢«é•¿è½¯å½’ç±»ä¸ºFPLX=72
- æœ¬å…¬å¸APIç»Ÿä¸€ä½¿ç”¨ç±»å‹82è¡¨ç¤ºæ•°ç”µæ™®ç¥¨ï¼Œé€šè¿‡ä¸šåŠ¡ç‰¹å¾åŒºåˆ†å­ç±»å‹
- éœ€è¦åœ¨æŸ¥éªŒæ—¶æ ¹æ®é•¿è½¯è¿”å›çš„FPLXåŠ¨æ€åˆ¤æ–­ä½¿ç”¨å“ªä¸ªæ˜ å°„è¡¨

#### 6.3.2 æ˜ç»†å­—æ®µæ˜ å°„å¤„ç†ï¼ˆæ‹†åˆ†ä¸ºä¸¤ä¸ªæ•°ç»„ï¼‰

âš ï¸ **å…³é”®**ï¼šå¿…é¡»å°†é•¿è½¯72çš„æ˜ç»†æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ•°ç»„ã€‚

**å®Œæ•´æ˜ å°„é€»è¾‘**ï¼š
```javascript
// é•¿è½¯72 â†’ æœ¬å…¬å¸82ï¼ˆæ‹†åˆ†æ¶æ„ï¼‰
function mapTollInvoice72To82(changRuanResponse) {
  const items = [];
  const tollFeeDetailList = [];

  const childList = changRuanResponse.BODY.CHILDLIST.CHILD || [];

  childList.forEach((child, index) => {
    // 1. æ˜ å°„åˆ°æ ‡å‡†è´§ç‰©items[]ï¼ˆä¿æŒè¯­ä¹‰æ­£ç¡®ï¼‰
    items.push({
      sequence_no: index + 1,
      name: child.HWMC || "é€šè¡Œè´¹",          // è´§ç‰©åç§°
      specification: "",                      // è§„æ ¼å‹å·ç•™ç©º
      unit: "",                              // å•ä½ç•™ç©º
      quantity: "",                          // æ•°é‡ç•™ç©º
      unit_price: "",                        // å•ä»·ç•™ç©º
      amount: parseFloat(child.JE),          // é‡‘é¢
      tax_rate: parseFloat(child.SLV),       // ç¨ç‡
      tax_amount: parseFloat(child.SE),      // ç¨é¢
      tax_classification_code: null,         // ç¨æ”¶åˆ†ç±»ç¼–ç 
      deduction_amount: null,                // æ‰£é™¤é¢
      item_short_name: null,                 // å•†å“ç®€ç§°
      product_barcode: null                  // å•†å“æ¡ç 
    });

    // 2. æ˜ å°„åˆ°é€šè¡Œè´¹ä¸šåŠ¡è¦ç´ toll_fee_detail_list[]
    tollFeeDetailList.push({
      sequence_no: index + 1,
      vehicle_plate: child.CPH || "",                    // è½¦ç‰Œå·
      toll_type: child.LX || "",                         // é€šè¡Œç±»å‹
      start_date: normalizeDate(child.TXRQQ),            // é€šè¡Œæ—¥æœŸèµ·
      end_date: normalizeDate(child.TXRQZ),              // é€šè¡Œæ—¥æœŸæ­¢
      amount: parseFloat(child.JE),                      // é‡‘é¢
      tax_rate: parseFloat(child.SLV),                   // ç¨ç‡
      tax_amount: parseFloat(child.SE),                  // ç¨é¢
      special_policy_code: child.TSZCBS || null,         // ç‰¹æ®Šæ”¿ç­–æ ‡è¯†
      actual_tax_rate: child.SJSL || null                // å®é™…ç¨ç‡
    });
  });

  return {
    ...otherInvoiceFields,
    items: items,                              // æ ‡å‡†è´§ç‰©æ˜ç»†
    toll_fee_detail_list: tollFeeDetailList,   // é€šè¡Œè´¹ä¸šåŠ¡è¦ç´ 
    item_count: items.length                   // æ˜ç»†æ¡æ•°
  };
}

function normalizeDate(dateStr) {
  if (!dateStr) return null;

  // ç»Ÿä¸€è½¬æ¢ä¸º YYYY-MM-DD æ ¼å¼
  if (/^\d{8}$/.test(dateStr)) {
    // YYYYMMDD â†’ YYYY-MM-DD
    return `${dateStr.substr(0,4)}-${dateStr.substr(4,2)}-${dateStr.substr(6,2)}`;
  }

  // å·²ç»æ˜¯ YYYY-MM-DD æ ¼å¼
  if (/^\d{4}-\d{2}-\d{2}$/.test(dateStr)) {
    return dateStr;
  }

  return dateStr;
}
```

**æ•°æ®ç¤ºä¾‹**ï¼š
```json
{
  "invoice_number": "12345678901234567890",
  "invoice_type": "82",
  "amount_including_tax": 1030.00,
  "tax_amount": 30.00,

  // æ ‡å‡†è´§ç‰©æ˜ç»†ï¼ˆä¿æŒè¯­ä¹‰æ­£ç¡®ï¼‰
  "items": [
    {
      "sequence_no": 1,
      "name": "é€šè¡Œè´¹",
      "specification": "",           // ç•™ç©º
      "unit": "",                   // ç•™ç©º
      "quantity": "",               // ç•™ç©º
      "unit_price": "",             // ç•™ç©º
      "amount": 1000.00,
      "tax_rate": 0.03,
      "tax_amount": 30.00
    }
  ],

  // é€šè¡Œè´¹ç‰¹å®šä¸šåŠ¡è¦ç´ 
  "toll_fee_detail_list": [
    {
      "sequence_no": 1,
      "vehicle_plate": "äº¬A12345",       // è½¦ç‰Œå·
      "toll_type": "é«˜é€Ÿå…¬è·¯",           // é€šè¡Œç±»å‹
      "start_date": "2025-12-01",       // é€šè¡Œæ—¥æœŸèµ·
      "end_date": "2025-12-30",         // é€šè¡Œæ—¥æœŸæ­¢
      "amount": 1000.00,
      "tax_rate": 0.03,
      "tax_amount": 30.00
    }
  ]
}
```

#### 6.3.3 åˆå¹¶å­—æ®µè§£æ

é•¿è½¯72çš„åœ°å€ç”µè¯ã€å¼€æˆ·è¡Œè´¦å·æ˜¯åˆå¹¶å­—æ®µï¼š

**è§£æé€»è¾‘**ï¼š
```javascript
function parseAddressPhone(addressPhone) {
  if (!addressPhone) return { address: null, phone: null };

  // å°è¯•æŒ‰ç©ºæ ¼åˆ†å‰²
  const parts = addressPhone.trim().split(/\s+/);
  if (parts.length < 2) {
    return { address: addressPhone, phone: null };
  }

  // æœ€åä¸€æ®µå¯èƒ½æ˜¯ç”µè¯
  const lastPart = parts[parts.length - 1];
  if (/^[\d\-]+$/.test(lastPart)) {
    // æœ€åä¸€æ®µæ˜¯ç”µè¯
    return {
      address: parts.slice(0, -1).join(' '),
      phone: lastPart
    };
  }

  return { address: addressPhone, phone: null };
}

function parseBankAccount(bankAccount) {
  if (!bankAccount) return { bank: null, account: null };

  // å°è¯•æŒ‰ç©ºæ ¼åˆ†å‰²
  const parts = bankAccount.trim().split(/\s+/);
  if (parts.length < 2) {
    return { bank: bankAccount, account: null };
  }

  // æœ€åä¸€æ®µå¯èƒ½æ˜¯è´¦å·
  const lastPart = parts[parts.length - 1];
  if (/^\d+$/.test(lastPart)) {
    // æœ€åä¸€æ®µæ˜¯è´¦å·
    return {
      bank: parts.slice(0, -1).join(' '),
      account: lastPart
    };
  }

  return { bank: bankAccount, account: null };
}
```

#### 6.3.4 é€šè¡Œæ—¥æœŸéªŒè¯

é€šè¡Œæ—¥æœŸå­—æ®µéœ€è¦éªŒè¯ï¼š

**éªŒè¯é€»è¾‘**ï¼š
```javascript
function validateTollDates(startDate, endDate, issueDate) {
  // 1. æ—¥æœŸæ ¼å¼éªŒè¯
  if (!isValidDate(startDate) || !isValidDate(endDate)) {
    throw new Error("é€šè¡Œæ—¥æœŸæ ¼å¼æ— æ•ˆ");
  }

  // 2. é€šè¡Œæ—¥æœŸèµ· <= é€šè¡Œæ—¥æœŸæ­¢
  if (new Date(startDate) > new Date(endDate)) {
    throw new Error("é€šè¡Œæ—¥æœŸèµ·ä¸èƒ½æ™šäºé€šè¡Œæ—¥æœŸæ­¢");
  }

  // 3. é€šè¡Œæ—¥æœŸæ­¢ <= å¼€ç¥¨æ—¥æœŸ
  if (new Date(endDate) > new Date(issueDate)) {
    throw new Error("é€šè¡Œæ—¥æœŸä¸èƒ½æ™šäºå¼€ç¥¨æ—¥æœŸ");
  }

  return true;
}
```

#### 6.3.5 é‡‘é¢è®¡ç®—éªŒè¯

é€šè¡Œè´¹å‘ç¥¨çš„é‡‘é¢è®¡ç®—ä¸å¸¸è§„å‘ç¥¨ç›¸åŒï¼š

**éªŒè¯é€»è¾‘**ï¼š
```javascript
// éªŒè¯ä»·ç¨åˆè®¡ = é‡‘é¢åˆè®¡ + ç¨é¢åˆè®¡
function validateTotalAmount(items, totalTax, totalAmount) {
  // è®¡ç®—æ˜ç»†é‡‘é¢æ±‡æ€»
  const itemsAmount = items.reduce((sum, item) => sum + item.amount, 0);
  const itemsTax = items.reduce((sum, item) => sum + item.tax_amount, 0);

  // éªŒè¯æ˜ç»†æ±‡æ€»
  if (Math.abs(itemsAmount - (totalAmount - totalTax)) > 0.02) {
    console.warn("æ˜ç»†é‡‘é¢æ±‡æ€»ä¸æ±‡æ€»é‡‘é¢ä¸ä¸€è‡´");
  }

  if (Math.abs(itemsTax - totalTax) > 0.02) {
    console.warn("æ˜ç»†ç¨é¢æ±‡æ€»ä¸æ±‡æ€»ç¨é¢ä¸ä¸€è‡´");
  }

  // éªŒè¯ä»·ç¨åˆè®¡
  if (Math.abs((itemsAmount + itemsTax) - totalAmount) > 0.02) {
    throw new Error("ä»·ç¨åˆè®¡éªŒè¯å¤±è´¥");
  }

  return true;
}
```

#### 6.3.6 æŠµæ‰£ç±»å‹åˆ¤æ–­

æ•°ç”µé€šè¡Œè´¹å‘ç¥¨é€šå¸¸å¯æŠµæ‰£ï¼š

**åˆ¤æ–­é€»è¾‘**ï¼š
```javascript
function determineTollInvoiceDeductible(invoice) {
  // æ•°ç”µé€šè¡Œè´¹å‘ç¥¨ï¼ˆ72ç±»å‹ï¼‰é€šå¸¸å¯æŠµæ‰£
  // é™¤éæ˜ç»†ä¸­æœ‰ç‰¹æ®Šæ”¿ç­–æ ‡è¯†

  const hasNonDeductiblePolicy = invoice.items.some(item =>
    item.special_policy_code === "1" ||  // å…ç¨
    item.special_policy_code === "2" ||  // ä¸å¾ç¨
    item.special_policy_code === "01"    // ä¸å¾ç¨
  );

  if (hasNonDeductiblePolicy) {
    return "07";  // ä¸å¯æŠµæ‰£
  }

  return "06";  // å¯æŠµæ‰£
}
```

---

## ä¸ƒã€é›†æˆæ³¨æ„äº‹é¡¹

### 7.1 å¿…å¡«å­—æ®µå¯¹æ¯”

**é•¿è½¯APIæŸ¥éªŒè¯·æ±‚å¿…å¡«å­—æ®µ**:
- å‘ç¥¨ç±»å‹ (`FPLX`) - 72
- å‘ç¥¨å·ç  (`FPHM`) - 20ä½æ•°å­—
- å¼€ç¥¨æ—¥æœŸ (`KPRQ`) - YYYYMMDDæ ¼å¼
- ä»·ç¨åˆè®¡ (`FPJE`) - ä»·ç¨åˆè®¡é‡‘é¢

**æœ¬å…¬å¸APIå“åº”å¿…å¡«å­—æ®µ**:
- `invoice_number` (å‘ç¥¨å·ç ) - å¿…å¡«ï¼Œ20ä½æ•°å­—
- `invoice_status` (å‘ç¥¨çŠ¶æ€) - å¿…å¡«ï¼Œä»FPZTæ˜ å°„
- `seller_name` (é”€å”®æ–¹åç§°) - å¿…å¡«
- `buyer_name` (è´­ä¹°æ–¹åç§°) - å¿…å¡«
- `amount_including_tax` (ä»·ç¨åˆè®¡) - å¿…å¡«
- `tax_amount` (åˆè®¡ç¨é¢) - å¿…å¡«
- `amount_in_words` (ä»·ç¨åˆè®¡å¤§å†™) - å¿…å¡«ï¼Œéœ€è‡ªè¡Œè®¡ç®—

### 7.2 å­—æ®µé•¿åº¦å·®å¼‚

| å­—æ®µ | æœ¬å…¬å¸é•¿åº¦ | é•¿è½¯é•¿åº¦ | å®é™…é£é™©è¯„ä¼° |
|------|-----------|---------|------------|
| invoice_number | 20 | 10(å®é™…20) | âœ… é•¿åº¦ä¸€è‡´ï¼Œæ•°ç”µç¥¨å·20ä½ |
| seller_tax_no | 20 | 64 | âš ï¸ é•¿è½¯æ›´å¤§ï¼Œä½†ä¸­å›½ç¨å·18ä½ï¼Œ20ä½è¶³å¤Ÿ |
| buyer_tax_no | 20 | 64 | âš ï¸ é•¿è½¯æ›´å¤§ï¼Œä½†ä¸­å›½ç¨å·18ä½ï¼Œ20ä½è¶³å¤Ÿ |
| buyer_name | 150 | 300 | âš ï¸ é•¿è½¯æ›´å¤§ï¼Œéœ€æˆªæ–­è¶…é•¿åç§° |
| seller_name | 150 | 300 | âš ï¸ é•¿è½¯æ›´å¤§ï¼Œéœ€æˆªæ–­è¶…é•¿åç§° |

### 7.3 æ•°æ®å®Œæ•´æ€§

**é•¿è½¯ç‹¬æœ‰å­—æ®µ**ï¼ˆæœ¬å…¬å¸APIæ— å¯¹åº”ï¼‰:
- `CYCS` (æŸ¥éªŒæ¬¡æ•°) - é•¿è½¯ç»Ÿè®¡æŸ¥éªŒæ¬¡æ•°
- `CYSJ` (æŸ¥éªŒæ—¶é—´) - é•¿è½¯æŸ¥éªŒæ—¶é—´æˆ³
- `JE` (é‡‘é¢åˆè®¡) - é•¿è½¯è¿”å›ï¼Œæœ¬å…¬å¸ä»itemsè®¡ç®—
- `SBBH` (è®¾å¤‡ç¼–å·) - æ•°ç”µç¥¨å¯èƒ½ä¸ºç©º
- `JYM` (æ ¡éªŒç ) - æ•°ç”µç¥¨ä¸ºç©º
- `TXFBZ` (é€šè¡Œè´¹æ ‡å¿—) - æ ‡è¯†é€šè¡Œè´¹ç±»å‹
- `TSZCBS` (ç‰¹æ®Šæ”¿ç­–æ ‡è¯†) - æ˜ç»†çº§ç‰¹æ®Šæ”¿ç­–
- `SJSL` (å®é™…ç¨ç‡) - æ˜ç»†çº§å®é™…ç¨ç‡

**æœ¬å…¬å¸ç‹¬æœ‰å­—æ®µ**ï¼ˆéœ€ä»å…¶ä»–æ•°æ®æºè·å–ï¼‰:
- `amount_in_words` (ä»·ç¨åˆè®¡å¤§å†™) - ä»amount_including_taxè®¡ç®—
- `item_count` (æ˜ç»†æ¡æ•°) - ä»itemsæ•°ç»„é•¿åº¦è®¡ç®—
- `is_blue_invoice` (è“å­—/çº¢å­—æ ‡è¯†) - ä»FPZTæ¨æ–­
- `original_blue_invoice_no` (åŸè“å­—å‘ç¥¨å·) - ä»ä¸šåŠ¡ç³»ç»Ÿè·å–
- `paper_invoice_no` (çº¸è´¨å‘ç¥¨å·ç ) - æ•°ç”µç¥¨æ— æ­¤å­—æ®µ
- `invoice_code` (å‘ç¥¨ä»£ç ) - æ•°ç”µç¥¨æ— æ­¤å­—æ®µ
- `issuer` (å¼€ç¥¨äºº) - æ•°ç”µç¥¨æ— æ­¤å­—æ®µ
- `reviewer` (å¤æ ¸äºº) - æ•°ç”µç¥¨æ— æ­¤å­—æ®µ
- `payee` (æ”¶æ¬¾äºº) - æ•°ç”µç¥¨æ— æ­¤å­—æ®µ
- `seller_taxpayer_type_code` (é”€æ–¹çº³ç¨äººç±»å‹) - ä»ä¸šåŠ¡è§„åˆ™åˆ¤æ–­

### 7.4 æ•°ç”µé€šè¡Œè´¹å‘ç¥¨ç‰¹æ®Šé›†æˆè¦ç‚¹

âš ï¸ **è¿™æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå¿…é¡»æ ¹æ®ä¸šåŠ¡ç‰¹æ€§è¯¦ç»†è¯´æ˜ï¼**

#### 7.4.1 å‘ç¥¨ç±»å‹è·¯ç”±æœºåˆ¶

**æŒ‘æˆ˜**ï¼šæœ¬å…¬å¸APIç»Ÿä¸€ä½¿ç”¨ç±»å‹82è¡¨ç¤ºæ•°ç”µæ™®ç¥¨ï¼Œä½†é•¿è½¯åŒºåˆ†ä¸º09å’Œ72ä¸¤ç§ç±»å‹ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æŸ¥éªŒè¯·æ±‚é˜¶æ®µ**ï¼š
   - æ¥æ”¶åˆ°82ç±»å‹çš„æŸ¥éªŒè¯·æ±‚
   - æ£€æŸ¥æ˜¯å¦æœ‰é€šè¡Œè´¹ç‰¹å¾ï¼ˆTSPZBZ=14æˆ–æ˜ç»†åŒ…å«è½¦ç‰Œå·ç­‰ï¼‰
   - å†³å®šè°ƒç”¨é•¿è½¯FPLX=72è¿˜æ˜¯FPLX=09

2. **æŸ¥éªŒå“åº”é˜¶æ®µ**ï¼š
   - é•¿è½¯è¿”å›FPLX=72æ—¶ï¼Œè¯†åˆ«ä¸ºé€šè¡Œè´¹ç±»å‹
   - ä½¿ç”¨æœ¬æ˜ å°„è¡¨ï¼ˆ82â†’72ï¼‰è¿›è¡Œå­—æ®µè½¬æ¢
   - é•¿è½¯è¿”å›FPLX=09ä¸”QDLX=10æ—¶ï¼Œä½¿ç”¨æ ‡å‡†æ•°ç”µæ™®ç¥¨æ˜ å°„è¡¨

3. **ç±»å‹æ ‡è¯†**ï¼š
   - åœ¨æœ¬å…¬å¸APIå“åº”ä¸­ï¼Œå¯æ‰©å±•å­—æ®µæ ‡è¯†é€šè¡Œè´¹ç‰¹å¾
   - å»ºè®®æ·»åŠ  `toll_flag` æˆ– `special_invoice_subtype` å­—æ®µ

#### 7.4.2 æ˜ç»†å­—æ®µçš„ç‰¹æ®Šå«ä¹‰å¤„ç†ï¼ˆå¿…é¡»æ‹†åˆ†ï¼ï¼‰

**æŒ‘æˆ˜**ï¼šé€šè¡Œè´¹å‘ç¥¨çš„æ˜ç»†å­—æ®µå«ä¹‰ä¸å¸¸è§„å‘ç¥¨å®Œå…¨ä¸åŒï¼Œå¦‚æœç›´æ¥é‡ç”¨ä¼šå¯¼è‡´è¯­ä¹‰æ··ä¹±ã€‚

**é”™è¯¯åšæ³•** âŒï¼š
```json
// âŒ è¿™ç§åšæ³•æ˜¯é”™è¯¯çš„ï¼å­—æ®µè¯­ä¹‰æ··ä¹±ï¼
{
  "items": [
    {
      "specification": "äº¬A12345",      // âŒ è§„æ ¼å‹å·å­—æ®µè¢«æ»¥ç”¨ä¸ºè½¦ç‰Œå·
      "unit": "é«˜é€Ÿå…¬è·¯",                // âŒ å•ä½å­—æ®µè¢«æ»¥ç”¨ä¸ºé€šè¡Œç±»å‹
      "quantity": "2025-12-01",         // âŒ æ•°é‡å­—æ®µè¢«æ»¥ç”¨ä¸ºæ—¥æœŸ
      "unit_price": "2025-12-30"        // âŒ å•ä»·å­—æ®µè¢«æ»¥ç”¨ä¸ºæ—¥æœŸ
    }
  ]
}
```

**æ­£ç¡®åšæ³•** âœ…ï¼š
```json
// âœ… æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹æ•°ç»„ï¼Œä¿æŒè¯­ä¹‰æ­£ç¡®
{
  // 1. æ ‡å‡†è´§ç‰©æ˜ç»†ï¼ˆä¿æŒ82ç±»å‹çš„ç»Ÿä¸€ç»“æ„ï¼‰
  "items": [
    {
      "sequence_no": 1,
      "name": "é€šè¡Œè´¹",
      "specification": "",           // è§„æ ¼å‹å·ç•™ç©ºï¼ˆä¸æ»¥ç”¨ï¼‰
      "unit": "",                   // å•ä½ç•™ç©ºï¼ˆä¸æ»¥ç”¨ï¼‰
      "quantity": "",               // æ•°é‡ç•™ç©ºï¼ˆä¸æ»¥ç”¨ï¼‰
      "unit_price": "",             // å•ä»·ç•™ç©ºï¼ˆä¸æ»¥ç”¨ï¼‰
      "amount": 1000.00,
      "tax_rate": 0.03,
      "tax_amount": 30.00
    }
  ],

  // 2. é€šè¡Œè´¹ç‰¹å®šä¸šåŠ¡è¦ç´ ï¼ˆæ–°å¢å­—æ®µï¼‰
  "toll_fee_detail_list": [
    {
      "sequence_no": 1,
      "vehicle_plate": "äº¬A12345",       // è¯­ä¹‰æ­£ç¡®çš„å­—æ®µå
      "toll_type": "é«˜é€Ÿå…¬è·¯",           // è¯­ä¹‰æ­£ç¡®çš„å­—æ®µå
      "start_date": "2025-12-01",       // è¯­ä¹‰æ­£ç¡®çš„å­—æ®µå
      "end_date": "2025-12-30",         // è¯­ä¹‰æ­£ç¡®çš„å­—æ®µå
      "amount": 1000.00,
      "tax_rate": 0.03,
      "tax_amount": 30.00
    }
  ]
}
```

**æ‹†åˆ†æ–¹æ¡ˆçš„ä¼˜åŠ¿**ï¼š
1. âœ… **è¯­ä¹‰æ­£ç¡®æ€§**ï¼šæ¯ä¸ªå­—æ®µåéƒ½å‡†ç¡®æè¿°å…¶å®é™…å«ä¹‰
2. âœ… **æ•°æ®ä¸€è‡´æ€§**ï¼šæ‰€æœ‰82ç±»å‹å‘ç¥¨çš„`items[]`ç»“æ„ä¿æŒç»Ÿä¸€
3. âœ… **å¯ç»´æŠ¤æ€§**ï¼šæœªæ¥æ·»åŠ æ–°å­—æ®µæ—¶ä¸ä¼šäº§ç”Ÿæ­§ä¹‰
4. âœ… **APIæ¸…æ™°æ€§**ï¼šè°ƒç”¨æ–¹ä¸ä¼šå› ä¸ºå­—æ®µé‡ç”¨è€Œå›°æƒ‘
5. âœ… **ä¸šåŠ¡æ‰©å±•æ€§**ï¼šå¯ä»¥çµæ´»æ‰©å±•é€šè¡Œè´¹ç‰¹æœ‰å­—æ®µï¼Œä¸å½±å“æ ‡å‡†è´§ç‰©æ˜ç»†

**å®ç°è¦ç‚¹**ï¼š
1. åœ¨æŸ¥éªŒå“åº”ä¸­**å¿…é¡»åŒ…å«**`toll_fee_detail_list`å­—æ®µï¼ˆé’ˆå¯¹72ç±»å‹ï¼‰
2. `items[]`å’Œ`toll_fee_detail_list[]`é€šè¿‡`sequence_no`ä¸€ä¸€å¯¹åº”
3. ä¸¤ä¸ªæ•°ç»„çš„é‡‘é¢ã€ç¨ç‡ã€ç¨é¢åº”ä¿æŒä¸€è‡´ï¼ˆç”¨äºéªŒè¯ï¼‰
4. APIæ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜`toll_fee_detail_list`ä»…åœ¨é€šè¡Œè´¹ç±»å‹å‘ç¥¨ä¸­å‡ºç°

**æ•°æ®éªŒè¯**ï¼š
```javascript
// éªŒè¯ä¸¤ä¸ªæ•°ç»„çš„æ•°æ®ä¸€è‡´æ€§
function validateTollFeeDataConsistency(items, tollFeeDetailList) {
  if (items.length !== tollFeeDetailList.length) {
    throw new Error("itemså’Œtoll_fee_detail_listé•¿åº¦ä¸ä¸€è‡´");
  }

  items.forEach((item, index) => {
    const tollDetail = tollFeeDetailList[index];

    if (item.sequence_no !== tollDetail.sequence_no) {
      throw new Error(`åºå·ä¸åŒ¹é…ï¼šitems[${index}]=${item.sequence_no}, toll[${index}]=${tollDetail.sequence_no}`);
    }

    if (Math.abs(item.amount - tollDetail.amount) > 0.01) {
      throw new Error(`é‡‘é¢ä¸ä¸€è‡´ï¼šåºå·${item.sequence_no}`);
    }

    if (Math.abs(item.tax_amount - tollDetail.tax_amount) > 0.01) {
      throw new Error(`ç¨é¢ä¸ä¸€è‡´ï¼šåºå·${item.sequence_no}`);
    }
  });

  return true;
}
```

#### 7.4.3 åˆå¹¶å­—æ®µè§£æå¤„ç†

**æŒ‘æˆ˜**ï¼šé•¿è½¯72çš„åœ°å€ç”µè¯ã€å¼€æˆ·è¡Œè´¦å·å­—æ®µæ˜¯åˆå¹¶çš„ï¼Œéœ€è¦è§£ææ‹†åˆ†ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å®ç°é€šç”¨çš„å­—æ®µè§£æå‡½æ•°
2. è§£æè§„åˆ™ï¼š
   - åœ°å€ + ç©ºæ ¼ + ç”µè¯
   - å¼€æˆ·è¡Œ + ç©ºæ ¼ + è´¦å·
   - ä½¿ç”¨æ­£åˆ™åŒ¹é…ç”µè¯/è´¦å·æ ¼å¼
3. å®¹é”™å¤„ç†ï¼š
   - å¦‚æœæ— æ³•è§£æï¼Œå°†æ•´ä¸ªå­—æ®µèµ‹ç»™addressæˆ–bank
   - ç”µè¯/è´¦å·å­—æ®µè®¾ä¸ºnull
4. å»ºè®®ï¼šåœ¨æœ¬å…¬å¸APIå“åº”ä¸­ä¿ç•™åŸå§‹åˆå¹¶å­—æ®µï¼ŒåŒæ—¶æä¾›è§£æåçš„ç‹¬ç«‹å­—æ®µ

#### 7.4.4 é€šè¡Œæ—¥æœŸéªŒè¯

**æŒ‘æˆ˜**ï¼šé€šè¡Œæ—¥æœŸå­—æ®µå¯èƒ½æœ‰å¤šç§æ ¼å¼ï¼Œä¸”éœ€è¦é€»è¾‘éªŒè¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æµ‹æ—¥æœŸæ ¼å¼ï¼š
   - 8ä½çº¯æ•°å­— â†’ YYYYMMDD
   - åŒ…å«"-" â†’ YYYY-MM-DD
   - åŒ…å«"/" â†’ YYYY/MM/DD
2. ç»Ÿä¸€è½¬æ¢ä¸º YYYY-MM-DD æ ¼å¼
3. éªŒè¯æ—¥æœŸåˆæ³•æ€§ï¼š
   - é€šè¡Œæ—¥æœŸèµ· <= é€šè¡Œæ—¥æœŸæ­¢
   - é€šè¡Œæ—¥æœŸ <= å¼€ç¥¨æ—¥æœŸ
   - æ—¥æœŸä¸èƒ½ä¸ºæœªæ¥æ—¥æœŸ
4. å¼‚å¸¸å¤„ç†ï¼š
   - æ—¥æœŸæ ¼å¼é”™è¯¯æ—¶ï¼Œè®°å½•è­¦å‘Šä½†ä¸é˜»æ–­æŸ¥éªŒ
   - æ—¥æœŸé€»è¾‘é”™è¯¯æ—¶ï¼Œè¿”å›éªŒè¯å¤±è´¥æç¤º

#### 7.4.5 æŠµæ‰£ç±»å‹è‡ªåŠ¨åˆ¤æ–­

**æŒ‘æˆ˜**ï¼šéœ€è¦åˆ¤æ–­æ•°ç”µé€šè¡Œè´¹å‘ç¥¨æ˜¯å¦å¯æŠµæ‰£ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **é»˜è®¤è§„åˆ™**ï¼š
   - æ•°ç”µé€šè¡Œè´¹å‘ç¥¨ï¼ˆ72ç±»å‹ï¼‰é»˜è®¤å¯æŠµæ‰£
   - è®¾ç½® `special_invoice_type = "06"`

2. **ä¾‹å¤–æƒ…å†µ**ï¼š
   - æ£€æŸ¥æ˜ç»†ä¸­çš„ `TSZCBS`ï¼ˆç‰¹æ®Šæ”¿ç­–æ ‡è¯†ï¼‰
   - å¦‚æœæ‰€æœ‰æ˜ç»†éƒ½æ˜¯å…ç¨(1)æˆ–ä¸å¾ç¨(2/01) â†’ ä¸å¯æŠµæ‰£
   - è®¾ç½® `special_invoice_type = "07"`

3. **ä¸šåŠ¡è§„åˆ™è¡¥å……**ï¼š
   - å¦‚æœä¸šåŠ¡ç³»ç»Ÿæœ‰æ˜ç¡®çš„æŠµæ‰£è§„åˆ™ï¼Œä¼˜å…ˆä½¿ç”¨ä¸šåŠ¡è§„åˆ™
   - å»ºè®®åœ¨æŸ¥éªŒå“åº”ä¸­æ·»åŠ æŠµæ‰£å»ºè®®å­—æ®µ

#### 7.4.6 å®é™…ç¨ç‡å¤„ç†

**æŒ‘æˆ˜**ï¼šé•¿è½¯APIä¸­æœ‰ `SJSL`ï¼ˆå®é™…ç¨ç‡ï¼‰ï¼Œå¯èƒ½ä¸æ ‡å‡†ç¨ç‡ä¸åŒã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä¼˜å…ˆä½¿ç”¨å®é™…ç¨ç‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
2. å¦‚æœå®é™…ç¨ç‡ä¸ºç©ºï¼Œä½¿ç”¨æ ‡å‡†ç¨ç‡ `SLV`
3. éªŒè¯å®é™…ç¨é¢æ˜¯å¦åŒ¹é…å®é™…ç¨ç‡ï¼ˆå…è®¸Â±0.02è¯¯å·®ï¼‰
4. å¦‚æœæœ¬å…¬å¸APIéœ€è¦æ”¯æŒå®é™…ç¨ç‡ï¼Œå¯æ‰©å±•æ˜ç»†å­—æ®µ

#### 7.4.7 çŠ¶æ€å­—æ®µå·®å¼‚å¤„ç†

**æŒ‘æˆ˜**ï¼šé•¿è½¯72ä½¿ç”¨FPZTè€Œä¸æ˜¯ZFBZï¼Œéœ€è¦æ­£ç¡®æ˜ å°„ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è¯†åˆ«å‘ç¥¨ç±»å‹ä¸º72æ—¶ï¼Œä»FPZTè¯»å–çŠ¶æ€
2. ä½¿ç”¨ç›¸åŒçš„æšä¸¾å€¼æ˜ å°„è§„åˆ™ï¼ˆ0/1=æ­£å¸¸ï¼Œ2=ä½œåºŸï¼Œ3/7/8=çº¢å†²ï¼‰
3. ç¡®ä¿ä»£ç é€»è¾‘èƒ½å¤Ÿå¤„ç†ä¸¤ç§å­—æ®µåï¼ˆFPZTå’ŒZFBZï¼‰
4. å»ºè®®åœ¨é€šç”¨æšä¸¾æ˜ å°„æ–‡æ¡£ä¸­è¯´æ˜72ç±»å‹çš„ç‰¹æ®Šæ€§

---

## å‚è€ƒæ–‡æ¡£

1. æœ¬å…¬å¸APIå®šä¹‰: [`/partners/invoice-verifications`](https://s.apifox.cn/2795ad32-31e7-4363-8294-578e8dc6202c/395314528e0) (Definition ID: 231697052)
2. é•¿è½¯APIæ–‡æ¡£: `ã€é•¿è½¯ã€‘å‘ç¥¨æŸ¥éªŒæœåŠ¡è°ƒç”¨è¯´æ˜V4.0.16.pdf` (ç« èŠ‚3.2.3.19ï¼Œç¬¬24-25é¡µ)
3. é€šç”¨æšä¸¾æ˜ å°„: `00_é€šç”¨è¯´æ˜_æšä¸¾æ˜ å°„.md`
4. é€šç”¨è¯·æ±‚å‚æ•°æ˜ å°„: `00_é€šç”¨è¯´æ˜_è¯·æ±‚å‚æ•°æ˜ å°„.md`
5. å›½å®¶ç¨åŠ¡æ€»å±€å‘ç¥¨æŸ¥éªŒå¹³å°: https://inv-veri.chinatax.gov.cn/
6. å‚è€ƒæ˜ å°„è¡¨: `æœ¬å…¬å¸14_å¢å€¼ç¨æ™®é€šå‘ç¥¨ï¼ˆé€šè¡Œè´¹ï¼‰â†’é•¿è½¯14.md`
7. å‚è€ƒæ˜ å°„è¡¨: `æœ¬å…¬å¸82_æ•°ç”µæ™®ç¥¨â†’é•¿è½¯09(QDLX=10).md`

---

**æ–‡æ¡£ç»“æŸ**
